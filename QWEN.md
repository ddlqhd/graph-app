# GraphSQL - å›¾æ•°æ®å¯è§†åŒ–æ¼”ç¤ºå¹³å°

## é¡¹ç›®æ¦‚è¿°

GraphSQL æ˜¯ä¸€ä¸ªåŸºäº Vue 3 + AntV G6 + Neo4j çš„å›¾æ•°æ®å¯è§†åŒ–åˆ†ææ¼”ç¤ºå¹³å°ã€‚è¯¥é¡¹ç›®ä¸“æ³¨äºæä¾›ç›´è§‚çš„å›¾æ•°æ®å¯è§†åŒ–å’Œäº¤äº’å¼åˆ†æåŠŸèƒ½ï¼Œä¸»è¦ç”¨äºæ¼”ç¤ºå’Œæ¦‚å¿µéªŒè¯ã€‚

### é¡¹ç›®ç»“æ„

```
graphsql/
â”œâ”€â”€ frontend/          # Vue 3 å‰ç«¯åº”ç”¨
â”œâ”€â”€ backend/           # Node.js/Express åç«¯ API
â”œâ”€â”€ database/          # Neo4j ç›¸å…³é…ç½®å’Œåˆå§‹åŒ–è„šæœ¬
â”œâ”€â”€ docs/             # é¡¹ç›®æ–‡æ¡£
â”œâ”€â”€ docker-compose.yml # Docker éƒ¨ç½²é…ç½®
â”œâ”€â”€ README.md         # é¡¹ç›®è¯´æ˜
â”œâ”€â”€ start.sh          # å¿«é€Ÿå¯åŠ¨è„šæœ¬
â””â”€â”€ product_design.md # æŠ€æœ¯é€‰å‹æŠ¥å‘Š
```

### æŠ€æœ¯æ ˆ

#### å‰ç«¯
- **Vue 3** - æ¸è¿›å¼ JavaScript æ¡†æ¶
- **Element Plus** - Vue 3 UI ç»„ä»¶åº“
- **AntV G6 4.8.24** - ä¸“ä¸šå›¾å¯è§†åŒ–å¼•æ“
- **Pinia** - Vue çŠ¶æ€ç®¡ç†
- **Vue Router** - è·¯ç”±ç®¡ç†
- **Vite** - æ„å»ºå·¥å…·
- **Axios** - HTTP å®¢æˆ·ç«¯
- **TypeScript** - ç±»å‹æ£€æŸ¥

#### åç«¯
- **Node.js** - è¿è¡Œæ—¶ç¯å¢ƒ
- **Express** - Web æ¡†æ¶
- **Neo4j Driver** - å›¾æ•°æ®åº“é©±åŠ¨
- **TypeScript** - ç±»å‹æ£€æŸ¥

#### æ•°æ®åº“
- **Neo4j** - å›¾æ•°æ®åº“ï¼ˆç¤¾åŒºç‰ˆï¼‰

#### éƒ¨ç½²
- **Docker & Docker Compose** - å®¹å™¨åŒ–éƒ¨ç½²

## é¡¹ç›®æ¶æ„

è¯¥é¡¹ç›®é‡‡ç”¨å‰åç«¯åˆ†ç¦»çš„ä¸‰å±‚æ¶æ„ï¼š

1. **å‰ç«¯å±•ç¤ºå±‚**ï¼šVue 3 åº”ç”¨ï¼Œä½¿ç”¨ G6 è¿›è¡Œå›¾å¯è§†åŒ–
2. **åç«¯æœåŠ¡å±‚**ï¼šExpress API æœåŠ¡ï¼Œå¤„ç†ä¸šåŠ¡é€»è¾‘å’Œæ•°æ®è½¬æ¢
3. **æ•°æ®å±‚**ï¼šNeo4j å›¾æ•°æ®åº“ï¼Œå­˜å‚¨å›¾ç»“æ„æ•°æ®

### æ•°æ®æµ
1. å‰ç«¯ Vue åº”ç”¨åˆå§‹åŒ–ï¼Œé€šè¿‡ axios å‘åå° API å‘èµ·è¯·æ±‚
2. åç«¯æœåŠ¡æ¥æ”¶åˆ°è¯·æ±‚ï¼Œä½¿ç”¨ neo4j-driver æ„é€  Cypher æŸ¥è¯¢è¯­å¥
3. é©±åŠ¨æ‰§è¡ŒæŸ¥è¯¢ï¼ŒNeo4j æ•°æ®åº“è¿”å›åŸå§‹ç»“æœ
4. åç«¯å¯¹æ•°æ®è¿›è¡Œå¤„ç†å’Œç»„ç»‡ï¼Œå°è£…æˆå‰ç«¯ G6 çº¦å®šçš„æ•°æ®æ ¼å¼ï¼ˆ`{ nodes: [], edges: [] }`ï¼‰ï¼Œä»¥ JSON å½¢å¼è¿”å›
5. å‰ç«¯æ¥æ”¶åˆ°æ•°æ®ï¼Œäº¤ç”± G6 å¼•æ“è¿›è¡Œæ¸²æŸ“
6. ç”¨æˆ·åœ¨å‰ç«¯ä¸å›¾è°±è¿›è¡Œäº¤äº’ï¼ˆç¼©æ”¾ã€æ‹–æ‹½ã€ç‚¹å‡»ç­‰ï¼‰ï¼ŒG6 è´Ÿè´£å¤„ç†æ‰€æœ‰äº¤äº’é€»è¾‘
7. äº¤äº’å¯èƒ½è§¦å‘æ–°çš„æ•°æ®è¯·æ±‚ï¼ˆå¦‚ç‚¹å‡»å±•å¼€æ›´å¤šå…³ç³»ï¼‰ï¼Œå¾ªç¯æ­¥éª¤ 1-6

### ç¤ºä¾‹æ•°æ®åœºæ™¯
é¡¹ç›®é¢„ç½®äº†å…¬å¸ç»„ç»‡æ¶æ„å›¾æ•°æ®ï¼ŒåŒ…æ‹¬å‘˜å·¥ã€éƒ¨é—¨ã€é¡¹ç›®å’ŒæŠ€èƒ½çš„å…³ç³»ç½‘ç»œï¼Œä¾¿äºæ¼”ç¤ºå›¾æ•°æ®å¯è§†åŒ–çš„æ•ˆæœã€‚

## Building and Running

### ç¯å¢ƒè¦æ±‚
- Node.js 16+
- Docker & Docker Composeï¼ˆæ¨èï¼‰
- 4GB+ RAM

### ä½¿ç”¨ Docker Composeï¼ˆæ¨èï¼‰

```bash
# å…‹éš†é¡¹ç›®
git clone https://github.com/your-repo/graphsql.git
cd graphsql

# å¯åŠ¨æ‰€æœ‰æœåŠ¡
docker-compose up -d

# è®¿é—®åº”ç”¨
open http://localhost:5173
```

### ä½¿ç”¨å¿«é€Ÿå¯åŠ¨è„šæœ¬

```bash
# å¯åŠ¨å¼€å‘ç¯å¢ƒ
./start.sh dev

# å¯åŠ¨ç”Ÿäº§ç¯å¢ƒ
./start.sh prod

# æ¸…ç†ç¯å¢ƒ
./start.sh clean
```

### æ‰‹åŠ¨å®‰è£…

1. **å¯åŠ¨ Neo4j æ•°æ®åº“**
   ```bash
   docker run -d \
     --name graphsql-neo4j \
     -p 7474:7474 -p 7687:7687 \
     -e NEO4J_AUTH=neo4j/password123 \
     neo4j:5.13
   ```

2. **åˆå§‹åŒ–ç¤ºä¾‹æ•°æ®**
   ```bash
   cd database
   npm install
   npm run init
   ```

3. **å¯åŠ¨åç«¯æœåŠ¡**
   ```bash
   cd backend
   npm install
   npm run dev
   ```

4. **å¯åŠ¨å‰ç«¯åº”ç”¨**
   ```bash
   cd frontend
   npm install
   npm run dev
   ```

### è®¿é—®åœ°å€
- å‰ç«¯åº”ç”¨: http://localhost:5173
- åç«¯API: http://localhost:3000
- Neo4j Browser: http://localhost:7474

## é¡¹ç›®åŠŸèƒ½

### åŠŸèƒ½ç‰¹æ€§
- ğŸ¯ **å¤šç§å¸ƒå±€ç®—æ³•** - åŠ›å¯¼å‘ã€å±‚æ¬¡ã€ç½‘æ ¼ç­‰å¸ƒå±€
- ğŸ¨ **ä¸°å¯Œäº¤äº’** - ç¼©æ”¾ã€æ‹–æ‹½ã€ç‚¹å‡»å±•å¼€ã€æœç´¢
- ğŸ“± **å“åº”å¼è®¾è®¡** - é€‚é…ä¸åŒå±å¹•å°ºå¯¸
- ğŸ” **æ™ºèƒ½æœç´¢** - èŠ‚ç‚¹å’Œå…³ç³»æœç´¢è¿‡æ»¤
- ğŸ“Š **æ•°æ®é¢æ¿** - å®æ—¶å±•ç¤ºå›¾ç»Ÿè®¡ä¿¡æ¯
- ğŸ­ **ä¸»é¢˜åˆ‡æ¢** - æ”¯æŒæ˜æš—ä¸»é¢˜

### API æ¥å£
- `GET /api/graph/data` - è·å–å›¾æ•°æ®
- `GET /api/graph/stats` - è·å–å›¾ç»Ÿè®¡ä¿¡æ¯
- `GET /api/graph/search?keyword=xxx` - æœç´¢èŠ‚ç‚¹
- `GET /api/graph/health` - å¥åº·æ£€æŸ¥
- `GET /api/graph/department/:departmentName` - è·å–éƒ¨é—¨å­å›¾
- `GET /api/graph/project/:projectId` - è·å–é¡¹ç›®å›¾
- `GET /api/graph/node/:nodeId` - è·å–èŠ‚ç‚¹è¯¦æƒ…

## Development Conventions

### å¼€å‘è§„èŒƒ
- ä½¿ç”¨ TypeScript è¿›è¡Œç±»å‹æ£€æŸ¥
- éµå¾ª ESLint å’Œ Prettier ä»£ç é£æ ¼
- ç¼–å†™å•å…ƒæµ‹è¯•å’Œé›†æˆæµ‹è¯•
- æ›´æ–°ç›¸å…³æ–‡æ¡£

### é¡¹ç›®ç›®å½•ç»“æ„è¯´æ˜

#### backend/
- `src/index.js` - åç«¯æœåŠ¡å…¥å£æ–‡ä»¶
- `src/config/database.js` - æ•°æ®åº“è¿æ¥é…ç½®
- `src/routes/graph.js` - å›¾æ•°æ®APIè·¯ç”±
- `src/controllers/graphController.js` - å›¾æ•°æ®APIæ§åˆ¶å™¨
- `src/models/GraphModel.js` - å›¾æ•°æ®æ¨¡å‹ï¼Œè´Ÿè´£ä¸Neo4jäº¤äº’

#### frontend/
- `src/main.ts` - å‰ç«¯åº”ç”¨å…¥å£
- `src/App.vue` - ä¸»åº”ç”¨ç»„ä»¶
- `src/router/index.ts` - è·¯ç”±é…ç½®
- `src/stores/graph.ts` - PiniaçŠ¶æ€ç®¡ç†
- `src/components/GraphViewer.vue` - G6å›¾å¯è§†åŒ–ç»„ä»¶
- `src/services/graphService.ts` - APIæœåŠ¡æ¥å£
- `src/utils/api.ts` - é€šç”¨APIå·¥å…·

#### database/
- `init-data.cypher` - Neo4jç¤ºä¾‹æ•°æ®åˆå§‹åŒ–è„šæœ¬
- `import-data.js` - æ•°æ®å¯¼å…¥è„šæœ¬
- `clear-data.js` - æ•°æ®æ¸…é™¤è„šæœ¬

## å¸¸è§æ“ä½œ

### å¦‚ä½•æ·»åŠ è‡ªå®šä¹‰æ•°æ®ï¼Ÿ
ä¿®æ”¹ `database/init-data.cypher` æ–‡ä»¶ï¼Œç„¶åé‡æ–°è¿è¡Œ `npm run init`ã€‚

### å¦‚ä½•ä¿®æ”¹å›¾çš„æ ·å¼ï¼Ÿ
åœ¨ `backend/src/models/GraphModel.js` ä¸­ä¿®æ”¹ `getNodeStyle` å’Œ `getEdgeStyle` æ–¹æ³•ã€‚

### æ”¯æŒçš„æµè§ˆå™¨
æ”¯æŒç°ä»£æµè§ˆå™¨ï¼ŒåŒ…æ‹¬ Chrome 80+ã€Firefox 75+ã€Safari 14+ã€Edge 80+ã€‚

### éƒ¨ç½²æ–¹æ¡ˆ
æ”¯æŒ Docker Compose éƒ¨ç½²ï¼Œä¹Ÿæ”¯æŒå•ç‹¬éƒ¨ç½²å‰ç«¯(nginx)å’Œåç«¯(Node.js)ã€‚